# MCP Gateway Environment Configuration
# Copy this file to .env and configure for your environment

# ============================================
# SERVER CONFIGURATION
# ============================================

# Server port (default: 3000)
PORT=3000

# Node environment (development, production, test)
NODE_ENV=development

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# Enable request logging
ENABLE_REQUEST_LOGGING=true

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# ============================================
# SEMANTIC ROUTER CONFIGURATION
# ============================================

# Maximum tools to return per query (default: 5)
SEMANTIC_ROUTER_MAX_TOOLS=5

# Minimum similarity score for category selection (0.0-1.0, default: 0.7)
SEMANTIC_ROUTER_CATEGORY_THRESHOLD=0.7

# Minimum similarity score for tool selection (0.0-1.0, default: 0.5)
SEMANTIC_ROUTER_TOOL_THRESHOLD=0.5

# Maximum categories to consider (default: 3)
SEMANTIC_ROUTER_MAX_CATEGORIES=3

# ============================================
# OAUTH REFRESH SCHEDULER CONFIGURATION
# ============================================

# Buffer time before token expiry to trigger refresh in milliseconds (default: 300000 = 5 minutes)
OAUTH_REFRESH_BUFFER_MS=300000

# Interval for checking refresh jobs in milliseconds (default: 60000 = 1 minute)
OAUTH_CHECK_INTERVAL_MS=60000

# Maximum retry attempts for failed token refreshes (default: 3)
OAUTH_MAX_RETRY_ATTEMPTS=3

# ============================================
# API KEY AUTHENTICATION CONFIGURATION
# ============================================

# Cache TTL for API key lookups in milliseconds (default: 300000 = 5 minutes)
API_KEY_CACHE_TTL_MS=300000

# Cache cleanup interval in milliseconds (default: 60000 = 1 minute)
API_KEY_CACHE_CLEANUP_INTERVAL_MS=60000

# ============================================
# RATE LIMITER CONFIGURATION
# ============================================

# Global rate limit in requests per second (default: 1000)
RATE_LIMIT_GLOBAL_RPS=1000

# Per-tenant rate limit in requests per second (default: 100)
RATE_LIMIT_TENANT_RPS=100

# Anonymous rate limit in requests per second (default: 10)
RATE_LIMIT_ANONYMOUS_RPS=10

# ============================================
# VAULT CIRCUIT BREAKER CONFIGURATION
# ============================================

# Number of consecutive failures before opening circuit (default: 5)
VAULT_CB_FAILURE_THRESHOLD=5

# Number of successes needed to close circuit from HALF_OPEN (default: 2)
VAULT_CB_SUCCESS_THRESHOLD=2

# Time to wait before attempting recovery in milliseconds (default: 60000 = 1 minute)
VAULT_CB_RESET_TIMEOUT_MS=60000

# Time window for counting failures in milliseconds (default: 10000 = 10 seconds)
VAULT_CB_WINDOW_DURATION_MS=10000

# ============================================
# FAISS INDEX CONFIGURATION
# ============================================

# Path to category FAISS index file
CATEGORY_INDEX_PATH=data/indices/categories.faiss

# Path to tool FAISS index file
TOOL_INDEX_PATH=data/indices/tools.faiss

# ============================================
# VAULT CONFIGURATION
# ============================================

# Vault server address
VAULT_ADDR=http://localhost:8200

# Vault authentication token (REQUIRED in production)
VAULT_TOKEN=dev-token

# Vault transit engine name (default: transit)
VAULT_TRANSIT_ENGINE=transit

# Vault KV engine name (default: secret)
VAULT_KV_ENGINE=secret

# Vault request timeout in milliseconds (default: 5000)
VAULT_TIMEOUT_MS=5000

# Vault max retries (default: 3)
VAULT_MAX_RETRIES=3

# ============================================
# REDIS CONFIGURATION
# ============================================

# Redis connection URL
REDIS_URL=redis://localhost:6379

# Redis connection timeout in milliseconds (default: 5000)
REDIS_CONNECT_TIMEOUT_MS=5000

# Redis command timeout in milliseconds (default: 3000)
REDIS_COMMAND_TIMEOUT_MS=3000

# ============================================
# NEO4J CONFIGURATION (GraphRAG)
# ============================================

# Neo4j connection URI
NEO4J_URI=bolt://localhost:7687

# Neo4j username
NEO4J_USERNAME=neo4j

# Neo4j password
NEO4J_PASSWORD=password

# ============================================
# MONITORING & OBSERVABILITY
# ============================================

# OpenTelemetry endpoint (optional)
# OTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318

# Prometheus metrics port (optional)
# PROMETHEUS_PORT=9090

# ============================================
# SECURITY NOTES
# ============================================

# - NEVER commit .env files with real credentials to git
# - Use Vault for production secrets management
# - Rotate VAULT_TOKEN regularly
# - Use strong passwords for Neo4j and Redis in production
# - Enable TLS for all external connections in production
# - Set NODE_ENV=production in production environments

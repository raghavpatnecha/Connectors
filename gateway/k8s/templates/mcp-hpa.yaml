# Horizontal Pod Autoscaler Template for MCP Servers
# Auto-scales pods based on CPU utilization

apiVersion: autoscaling/v1
kind: HorizontalPodAutoscaler
metadata:
  name: mcp-{{deploymentId}}-hpa
  namespace: mcp-servers
  labels:
    app: mcp-server
    deployment-id: {{deploymentId}}
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: mcp-{{deploymentId}}

  # Scaling configuration
  minReplicas: 1
  maxReplicas: 5

  # Target CPU utilization percentage
  # Scale up when CPU exceeds 70%
  targetCPUUtilizationPercentage: 70
